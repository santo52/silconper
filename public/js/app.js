function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var r=_toPrimitive(e,"string");return"symbol"===_typeof(r)?r:String(r)}function _toPrimitive(e,r){if("object"!==_typeof(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,r||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function validateForm(e){e.preventDefault(),e.stopPropagation();var r=$(e.target);r.find(".is-invalid").removeClass("is-invalid"),r.find(".invalid-feedback").remove();var t=validateRequired(r);return t?validateNumeric(r):t}function validateNumeric(e){var r=e.find(".form-control.numeric, .form-control.money").toArray(),t=!0;return r.map((function(e){var r=$(e).val();if(isNaN(r)){t&&($(e).focus(),t=!1);var o=$(e).hasClass("money")?"Debe ser un valor monetario válido.":"No es un número válido.";$(e).addClass("is-invalid").parent().append('<span class="error invalid-feedback">'.concat(o,"</span>"))}})),t}function validateRequired(e){var r=e.find("select.required, input.required, textarea.required").toArray(),t=!0;return r.map((function(e){var r=$(e).val();if(!r||!r.trim()){t&&($(e).focus(),t=!1);$(e).addClass("is-invalid").parent().append('<span class="error invalid-feedback">'.concat("Este campo es obligatorio.","</span>"))}})),t}var Login=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"send",value:function(e){if(e.preventDefault(),e.stopPropagation(),validateForm(e)){var r=$(e.target),t=new URLSearchParams(new FormData(r[0]));$.ajax({url:"/login",type:"POST",data:t,dataType:"json",processData:!1,success:function(e){console.log(e),e.auth?location.reload():$("#user, #password").addClass("is-invalid").parent().append('<span class="error invalid-feedback">El usuario o contraseña son incorrectos</span>')},error:function(e){console.log(e)}})}return!1}}]),e}(),login=new Login;
